{% extends 'base.html' %}

{% block content %}

<div class="content-container">
    <section class="content">
        <div class="content-section">
            <h3>–ü—Ä–æ –Ω–∞—à—É —à–∫–æ–ª—É</h3>
            <p>–ù–∞—à–∞ —à–∫–æ–ª–∞ - —Ü–µ —Å—É—á–∞—Å–Ω–∏–π –Ω–∞–≤—á–∞–ª—å–Ω–∏–π –∑–∞–∫–ª–∞–¥, —è–∫–∏–π –ø–æ—î–¥–Ω—É—î –≤ —Å–æ–±—ñ –±–∞–≥–∞—Ç–æ—Ä—ñ—á–Ω—ñ —Ç—Ä–∞–¥–∏—Ü—ñ—ó —è–∫—ñ—Å–Ω–æ—ó –æ—Å–≤—ñ—Ç–∏ —Ç–∞ —ñ–Ω–Ω–æ–≤–∞—Ü—ñ–π–Ω—ñ –ø—ñ–¥—Ö–æ–¥–∏ –¥–æ –Ω–∞–≤—á–∞–Ω–Ω—è. –ú–∏ –ø—Ä–∞–≥–Ω–µ–º–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ, –≤ —è–∫–æ–º—É –∫–æ–∂–µ–Ω —É—á–µ–Ω—å –º–æ–∂–µ —Ä–æ–∑–∫—Ä–∏—Ç–∏ —Å–≤–æ—ó —Ç–∞–ª–∞–Ω—Ç–∏ —Ç–∞ –∑–¥–æ–±—É—Ç–∏ –∑–Ω–∞–Ω–Ω—è, –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –¥–ª—è —É—Å–ø—ñ—Ö—É –≤ –º–∞–π–±—É—Ç–Ω—å–æ–º—É.</p>
            <p>–ù–∞—à—ñ –≤—á–∏—Ç–µ–ª—ñ - —Ü–µ –ø—Ä–æ—Ñ–µ—Å—ñ–æ–Ω–∞–ª–∏ –∑ –±–∞–≥–∞—Ç–æ—Ä—ñ—á–Ω–∏–º –¥–æ—Å–≤—ñ–¥–æ–º, —è–∫—ñ –ø–æ—Å—Ç—ñ–π–Ω–æ –≤–¥–æ—Å–∫–æ–Ω–∞–ª—é—é—Ç—å —Å–≤–æ—ó –Ω–∞–≤–∏—á–∫–∏ —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —Å—É—á–∞—Å–Ω—ñ –º–µ—Ç–æ–¥–∏–∫–∏ –≤–∏–∫–ª–∞–¥–∞–Ω–Ω—è.</p>
        </div>

        <!-- –°–µ–∫—Ü—ñ—è –¥–ª—è –≤—Å—ñ—Ö –ø–æ—Å—Ç—ñ–≤ (–∑ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º–∏ —Ç–∞ –±–µ–∑ —Ñ–∞–π–ª—ñ–≤) -->
        <div class="content-section">
            <h3>–û—Å—Ç–∞–Ω–Ω—ñ –Ω–æ–≤–∏–Ω–∏ —Ç–∞ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è</h3>
            <div class="news-grid">
                {% for post in posts %}
                    {% if not post.file_path or (post.file_path and not post.file_path.endswith('.pdf')) %}
                    <div class="news-card">
                        <div class="news-content">
                            {% if post.file_path and not post.file_path.endswith('.pdf') %}
                                <img src="{{ url_for('static', filename='uploads/' + post.file_path.split('/')[-1]) }}" alt="Post Image" class="news-image">
                            {% endif %}
                            <h4><a href="{{ url_for('post_detail', post_id=post.id) }}">{{ post.title }}</a></h4>
                            <p>{{ post.content[:100] }}{% if post.content|length > 100 %}...{% endif %}</p>
                            <small>–ê–≤—Ç–æ—Ä: {{ post.author.username }} | {{ post.date_posted.strftime('%Y-%m-%d') }}</small>

                            {% if current_user == post.author %}
                                <div class="post-actions">
                                    <a href="{{ url_for('delete_post', post_id=post.id) }}" class="delete-btn">
                                    <i class="fas fa-trash"></i> –í–∏–¥–∞–ª–∏—Ç–∏ –ø–æ—Å—Ç
                                    </a>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>

        <!-- –°–µ–∫—Ü—ñ—è —Ç—ñ–ª—å–∫–∏ –¥–ª—è PDF –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ -->
        <div class="content-section">
            <h3>–î–æ–∫—É–º–µ–Ω—Ç–∏</h3>
            <div class="news-grid">
                {% for post in posts %}
                    {% if post.file_path and post.file_path.endswith('.pdf') %}
                    <div class="news-card">
                        <div class="news-content">
                            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è PDF -->
                            <div class="pdf-preview">
                                <div class="pdf-icon">
                                    üìÑ
                                </div>
                                <div class="pdf-info">
                                    <h4 class="pdf-fullname">{{ post.file_path.split('/')[-1] }}</h4>
                                    <div class="pdf-actions">
                                        <a href="{{ url_for('static', filename='uploads/' + post.file_path.split('/')[-1]) }}"
                                           target="_blank" class="btn-view">
                                            –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏
                                        </a>
                                        <a href="{{ url_for('static', filename='uploads/' + post.file_path.split('/')[-1]) }}"
                                           download class="btn-download">
                                            –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <small>–ê–≤—Ç–æ—Ä: {{ post.author.username }} | {{ post.date_posted.strftime('%Y-%m-%d') }}</small>
                            {% if current_user == post.author %}
                                <div class="post-actions">
                                    <a href="{{ url_for('delete_post', post_id=post.id) }}" class="delete-btn">
                                    <i class="fas fa-trash"></i> –í–∏–¥–∞–ª–∏—Ç–∏ –ø–æ—Å—Ç
                                    </a>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    </section>
</div>
{% endblock content %}